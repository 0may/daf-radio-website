<!DOCTYPE html>
<html>
    <head>
        <title>Dynamische Akustische Forschung</title>
        <link rel="stylesheet" href="daf.css" />
        <script defer src="js/fontawesome-all.js"></script>
        <script src="js/p5.min.js"></script>
        <script src="js/vis.js"></script>
    </head>
    <body>

        <h1>Dynamische Akustische Forschung</h1>

        <div align="right" style="margin-right: 50px;">

            <a target="_blank" title="DAF on Facebook" href="https://www.facebook.com/DAF-Dynamische-Akustische-Forschung-452551598457326">
                <i class="fab fa-facebook-square" style="color:#aaa;"></i>
            </a>

        </div>

        <div align="center" style="margin-top:2em; margin-bottom:2em;">
            <a id="audioctrl">
                <div id="visContainer">

                </div>
            </a>

            <audio id="dafplayer">
                <source src="http://81.169.184.35:8000/mpd.mp3">
            </audio>
            <noscript>
                    <audio controls>
                        <source src="http://81.169.184.35:8000/mpd.mp3">
                    </audio>
            </noscript>
        </div>

        <div>
            <p style="font-size: x-large; margin-left: 50px; margin-right: 50px;" align="center">
            <font size="7" color="#ddd">DAF Radio</font> | Dynamische Akustische Forschung | Akademie der Bildenden K&uuml;nste N&uuml;rnberg
            </p>
        </div>

        <div>



        </div>

        <script type="text/javascript">

            var isPlaying = 0;

            var dafplayer= document.getElementById("dafplayer");
            dafplayer.volume = 1.0;

                
            var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            var audioSrc = audioCtx.createMediaElementSource(dafplayer);
            var analyser = audioCtx.createAnalyser();
            analyser.fftSize = 64;

            audioSrc.connect(audioCtx.destination);
            audioSrc.connect(analyser);
            var frequencyData = new Uint8Array(analyser.frequencyBinCount);


            document.getElementById("audioctrl").onclick=function () {

                if (isPlaying == 0) {
                    isPlaying = 1;
                    visPlay();
                    dafplayer.play();
                }
                else {
                    isPlaying = 0;
                    visPause();
                    dafplayer.pause();
                }
            };


            function update() {
        
                requestAnimationFrame(update);

                analyser.getByteFrequencyData(frequencyData);
                
            }

            update();

        </script>
    </body>
</html>
